# Исследуем алгоритм PPZ'
Перед Вами набор утилит, который я использую для численных экспериментов для моей курсовой.

# Контекст
В моей работе я ранее исследовал вероятностный алгоритм для решения задачи 3-SAT, называемый PPZ:
```
  input: F(x_1, x_2, ..., x_n) -- формула в 3-КНФ
  
  s = random(S_n)
  for i = 1 ... n:
    if существует C -- unit clause для x_{s(i)}:
      присвоить x_{s(i)} так, чтобы этот clause был истинный
    else
      присвоить x_{s(i)} случайно
```

Идея удаления unit clause называется unit propagation. В специальном случае *одновыполнимых* формул для этого алгоритма можно доказать оценку на матожидание 
(равновероятно по всем перестановкам s из S_n) числа "пропагированных" переменных -- хотя бы n/3. В рамках работы над курсовой мной и моим научным руководителем 
были построены примеры формул для каждого n >= 3, у которых матожидание составляет ровно n/3.

Мы добавили улучшение в алгоритм PPZ. Теперь при обнаружении пары клозов вида (a v -b), (-a v b) мы присваиваем a := b, где а -- более ранняя из двух переменная в s.
Будем называть такие пары клозок *эквикритическими*. Рабочее название нового алгоритма -- PPZ'. Сейчас я исследую, ведет ли это улучшение к более сильной нижней оценке
на матожидание числа пропагированных переменных. Численные эксперименты уверенно указывают, что новая точная оценка на матожидание должна быть n/2. 

# Как этим пользоваться
Два файла `trc.cpp` и `searchformulas.cpp` составляют две отдельные утилиты. При компиляции им нужна библиотека `lib.h` из этого репозитория. Две утилиты компилируются
отдельно с параметром `std=c++11`.

Утилита `trc` (total random choices) читает формулу из файла `formula.txt`, и считает для каждой переменной считает
вероятность (равновероятно по всем перестановкам) того, что эта переменная будет выбрана случайно (не с помощью unit propagation и не с помощью эквикритик).

Утилита `searchformulas` запрашивает количество переменных и зерно рандомизации, а затем начинает бесконечный процесс поиска одновыполнимых формул и подсчета матожидания 
числа переменных, выбранных случайно. Каждые 5 секунд 10 лучших по этому параметру формул сбрасываются в файл `records.txt` вместе с суммарным числом случайных выборов и процентом от 
максимально возможного числа случайных выборов (n\*n!). Так, формула с процентом, равным 50%, имеет матожидание числа случайных выборов, равное n/2. 
Все генерируемые формулы имеют единственный выполняющий набор (1 1 ... 1).

Формулы читаются и записываются двумя утилитами в одном и том же формате:
```
1 2 3 0
-1 -2 3 0
```
0 означает конец данного клоза, а положительное число k обозначает литерал x_k, отрицательное число -k обозначает литерал not x_k. Последний клоз обязательно нужно завершить 0.

### Предостережение
Пожалуйста, не кормите эти штуки формулами, в которых какая-нибудь переменная пропущена. То есть, если в формуле n переменных, то они должны быть названы 1,2,...,n,
а не, например, 1,3,4,5,...,n+1. Я не знаю, что будет, если скормить этой штуке формулу с пропущенной переменной. И вообще не стоит вскрывать эту тему. 
Вы молодые, шутливые, вам все легко. Это не то. Это не Чикатило и даже не архивы спецслужб. Сюда лучше не лезть.


